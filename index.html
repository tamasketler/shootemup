<html>

<head>
    <meta charset="UTF-8">
    <title>Retro Shoot'em up game</title>
    <style>
        body {
            background-color: #ffffff;
        }

        canvas {
            background-color: #222222;
        }
    </style>
</head>
<script src="pixi/pixi.min.js"></script>

<body onload="init();">
    <script>
        //Assets
        let splashImage = "assets/splash.png";
        //Aliases
        let Application = PIXI.Application,
            Container = PIXI.Container,
            loader = PIXI.Loader.shared,
            resources = PIXI.loader.resources,
            TextureCache = PIXI.utils.TextureCache,
            Sprite = PIXI.Sprite,
            Rectangle = PIXI.Rectangle;

        //Create a Pixi Application
        let app = new Application({
            width: 800,
            height: 600,
            antialias: true,
            transparent: false,
            resolution: 1
        });

        function loadMenu() {

        }

        function fadeSplash() {
            if (splash.alpha > 0) {
                splash.alpha -= 0.01;
            } else {
                stage.visible = false;
            }
        }

        function loadSplash() {
            splash = new Sprite(resources[splashImage].texture);
            splash.position.x = 0;
            splash.position.y = 0;
            splash.alpha = 1;
            stage.addChild(splash);

            //requestAnimationFrame(fadeSplash);
            loadMenu();

            //Start the game loop 
            //app.ticker.add(delta => gameLoop(delta));

        }

        function init() {
            document.body.appendChild(app.view);

            stage = new PIXI.Container();
            renderer = PIXI.autoDetectRenderer(
                800,
                600,
                { view: app.view }
            );

            loader
                .add(splashImage)
                .load(loadSplash);

            renderer.render(stage);
        }
    </script>
</body>

</html>